<html>

<head></head>

<body>
    <canvas id="cvs"></canvas>
    <script>
        class Planet {
            constructor(x, y, z) {
                this.x = x;
                this.y = y;
                this.z = z;
                this.velocity = {
                    x: 0,
                    y: 0,
                    z: 0
                }
                this.mass = 1
                this.forces = null
            }
            draw(context) {
                context.beginPath()
                context.arc(this.x - 10, this.y - 10, 10, 0, 2 * Math.PI);
                context.fill()
            }
        }
        let canvas = document.getElementById("cvs")
        let context = canvas.getContext("2d")
        let circles = []
        canvas.addEventListener("click", (e) => {
            let circle = new Planet(e.clientX, e.clientY, 0)
            circles.push(circle)
            circle.draw(context)
        })
        function update() {
            // console.log(circles[0].forces)
            for (let i = 0; i < circles.length; i++) {
                let forces = []
                for (let j = 0; j < circles.length; j++) {
                    if (i == j) {
                        continue
                    }
                    diff_x = (circles[i].x - circles[j].x)
                    diff_y = (circles[i].y - circles[j].y)
                    diff_z = (circles[i].z - circles[j].z)
                    // console.log([diff_x, diff_y, diff_z])
                    distance = Math.sqrt(diff_x ** 2 + diff_y ** 2 + diff_z ** 2)
                    // console.log(distance)
                    unit_x = diff_x / distance
                    unit_y = diff_y / distance
                    unit_z = diff_z / distance
                    // console.log([unit_x, unit_y, unit_z])
                    forces.push({
                        x: -1 * unit_x * circles[i].mass * circles[j].mass / distance ** 2,
                        y: -1 * unit_y * circles[i].mass * circles[j].mass / distance ** 2,
                        z: -1 * unit_z * circles[i].mass * circles[j].mass / distance ** 2,
                    })
                    // console.log(unit_x / (distance)*(distance))
                    // console.log([forces[0].x,forces[0].y, forces[0].z])
                }
                circles[i].forces = forces
            }
            context.clearRect(0, 0, canvas.width, canvas.height)
            circles.forEach(circle => {
                circle.forces.forEach(force => {
                    circle.x += force.x
                    circle.y += force.y
                    circle.z += force.z
                    // console.log([force.x,force.y, force.z])
                    circle.x += circle.velocity.x
                    circle.y += circle.velocity.y
                    circle.z += circle.velocity.z
                })
                circle.draw(context)
            })
        }
        setInterval(update, 100)
    </script>
</body>

</html>